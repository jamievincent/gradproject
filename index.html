<!DOCTYPE html>
<html>

<!---- import libraries ---->

<script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script>
<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.8.4/dist/aframe-extras.min.js"></script>

<script>
	AFRAME.registerComponent('vidhandler', {
	  // ...
	  init: function () {
	    // Set up initial state and variables.
	    this.toggle = false;
	    this.vid = document.querySelector("#vid")
	    this.vid.pause();
	  },
	  tick:function(){
	    
	if(this.el.object3D.visible == true){
	  if(!this.toggle){
	     this.toggle = true;
	     this.vid.play();
	    }
	  }else{
	  this.toggle = false;
	    this.vid.pause();
	    }
	  }
	});
</script>

<body style='margin : 0px; overflow: hidden;'>

	<!---- initialise scene ---->
	<a-scene embedded arjs='debugUIEnabled: false; sourceType: webcam;'>

		<a-assets>
			<video id="vid" src="https://cdn.glitch.com/b62367d1-ceab-454b-b664-b032f995ed86%2FBig_Buck_Bunny_Trailer_1080p.ogv.720p.webm?1532370072191" loop="true" crossorigin>
	    </a-assets>
		
		<!--- create a shape 
		<a-box position='0 0.5 0' material='opacity: 0.5;'></a-box>
		--->

		<!--- marker ---->
		<a-marker id='memarker' preset='hiro' vidhandler>
			<a-box position='0 0 0' material='transparent:true;opacity: 0.7;src:#vid'></a-box>
		</a-marker>
		<a-camera-static></a-camera-static>
	</a-scene>
</body>

</html>

<!---- <a-image id="test" src="howtoo.png" position="0 0 0" rotation="-90 0 0" width="" height="" opacity="1" transparent="true" alpha-test="0.2" shader="standard" scale="1 1 1" visible="" material="" geometry=""></a-image> --->